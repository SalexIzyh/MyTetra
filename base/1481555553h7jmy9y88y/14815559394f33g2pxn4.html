<html>
<head>
<TITLE>FileZilla FTP Server для домашней или офисной сети.</TITLE>
<META HTTP-EQUIV="Content-Type" Content="text/html; Charset=Windows-1251">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<META NAME="author" CONTENT="Белый Александр">
<META NAME="keywords" CONTENT="FTP,сервер,компьютер,доступ,файлы,настройка,FileZilla,сеть">
<META NAME="description" CONTENT="Установка и настройка бесплатного  FileZilla FTP Server в качестве сервера FTP, доступного из Интернет 
и размещенного на домашнем компьютере ( на компьютере 'за NAT' в локальной сети ).">
<style type="text/css">
body{font-family:"Times",Calibri,"Myriad Pro",Myriad,"Trebuchet MS",Helvetica,Arial,sans-serif;font-size:13pt;background-color:#fffff0;color:#000000;}
h1{color:#a52a2a;font-size:18pt;font-family:Georgia, Times, serif;font-weight:normal;}
h2{color:#0a0aa0;font-size:16pt;font-family:Georgia, Times, serif;font-weight:normal;}
img {max-width: 96%;}
</style>
</head>
<body bgcolor="#FEFFF0">
<table width="100%">

<tr>
<td width="20%"></td>
<td width="60%">
<center>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- Adapt-a -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2015323949432193"
     data-ad-slot="2828909264"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</center>
<BR><BR>
<!-- Яндекс.Директ -->
<div id="yandex_ad1"></div>
<script type="text/javascript">
(function(w, d, n, s, t) {
w[n] = w[n] || [];
w[n].push(function() {
Ya.Direct.insertInto(77159, "yandex_ad1", {
stat_id: 1,
ad_format: "direct",
type: "adaptive",
border_type: "block",
limit: 2,
border_radius: true,
links_underline: true,
site_bg_color: "FFFFFF",
border_color: "FBE5C0",
title_color: "0000CC",
url_color: "006600",
text_color: "000000",
hover_color: "0066FF",
sitelinks_color: "0000CC",
favicon: true,
no_sitelinks: false,
height: 200,
width: 300
});
});
t = d.getElementsByTagName("script")[0];
s = d.createElement("script");
s.src = "//an.yandex.ru/system/context.js";
s.type = "text/javascript";
s.async = true;
t.parentNode.insertBefore(s, t);
})(window, document, "yandex_context_callbacks");
</script>
<BR><BR>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- links_adapt -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2015323949432193"
     data-ad-slot="8529241667"
     data-ad-format="link"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

<BR><BR>



<center>
<h1>FileZilla FTP Server для домашней или небольшой офисной сети.</h1>
</center>
<br><BR>

<center><B><h2>
Что такое  FTP Server ?.
</h2></b></center>

&nbsp &nbsp 
Аббревиатура <B>FTP </B> происходит от английского  <B>F</B>ile <B>T</B>ransfer <B>P</B>rotocol ( протокол передачи файлов )  -  протокол прикладного уровня  для обмена файлами по транспортному протоколу TCP/IP между  двумя компьютерами,  FTP-клиентом и FTP-сервером. Это один их старейших , и тем не менее, по-прежнему активно используемый протокол. <BR><BR>
Протокол FTP предназначен для решения следующих задач : <BR><BR>
<LI>доступ к файлам и каталогам на удаленных хостах<BR><BR></LI>
<LI>обеспечение независимости клиента от типа файловой системы удаленного компьютера <BR><BR></LI>
<LI>надежная передача данных<BR><BR></li>
<LI>использование ресурсов удаленной системы.
<BR><BR></LI>
Протокол FTP поддерживает сразу два канала соединения - один для передачи <B>команд</B> и результатов их выполнения, другой - для обмена <B>данными</B> . При стандартных настройках FTP - сервер использует TCP порт 21 для организации канала передачи и приема команд и TCP порт 20 для организации канала приема/передачи данных. <BR><BR>
FTP-сервер ожидает подключения от FTP-клиентов  на TCP порт 21 и, после установления соединения, принимает и обрабатывает <B>команды FTP</B>, представляющие собой обычные текстовые строки. Команды определяют параметры соединения, тип передаваемых данных и действия по отношению к файлам и каталогам. После согласования параметров передачи, один из участников обмена становится в пассивный режим, ожидая входящие соединения для канала обмена  данными, а второй - устанавливает соединение  на данный порт и начинает передачу. По завершении передачи, соединение для обмена данными закрывается, но управляющее соединение остается открытым, позволяя продолжить FTP - сессию и создать новый сеанс передачи данных.<BR><BR>. 
Протокол FTP может использоваться не только для передачи данных между клиентом и сервером, но и между двумя серверами. В данном случае, клиент FTP устанавливает управляющее соединение с обоими FTP - серверами, переводит один из них в пассивный режим, а второй - в активный, создавая между ними канал передачи данных. <BR><BR>

FTP- клиент является программой, которая выполняет подключение к FTP- серверу и выполняет необходимые операции для просмотра содержимого каталогов сервера, приема, передачи и удаления файлов или папок. 
В качестве такой программы может использоваться обычный браузер, компоненты операционной системы или специально разработанные программные продукты, как , 
например, популярный менеджер закачек <B>Download Master</B> или многофункциональный бесплатный <B>FileZilla FTP Client</B>.<BR><BR>

Протокол FTP разрабатывался еще в те времена, когда клиент и сервер взаимодействовали напрямую, без каких-либо промежуточных преобразований TCP- пакетов, и  в стандартном режиме 
предполагает возможность создания  TCP - соединения  не только по инициативе клиента, но и по инициативе сервера от TCP порта 20 на TCP - порт клиента , номер которого передается  
в процессе создания сеанса передачи данных. <BR><BR>
 Реалии же сегодняшнего дня таковы, что подобное TCP - соединение от сервера к клиенту в подавляющем большинстве случаев невозможно, или очень непросто реализовать по причине того, 
что в большинстве случаев,  для подключения к  Интернет используется технология с трансляцией сетевых адресов <B>NAT</B> ( Network Address Translation ) , когда клиент 
не имеет сетевого интерфейса, доступного для создания прямого TCP- соединения  из Интернет. Типовая схема стандартного подключения к Интернет выглядит следующим образом:
<BR><BR><center>
<img src="http://ab57.ru/images/homenet.png" alt="Типовая схема локальной сети с подключением к Интернет через маршрутизатор с NAT" WIDTH=442 height=373>
<BR><BR></center>
Подключение к Интернет выполняется через специальное устройство - <B>Router</B> ( маршрутизатор с функцией NAT ), имеющее, как минимум два сетевых порта - один подключенный к сети провайдера, 
имеющий сетевой интерфейс с маршрутизируемым IP-адресом ( так называемый, "белый IP" ), например 212.248.22.144, и порт с сетевым интерфейсом для подключения 
устройств локальной сети с приватным, немаршрутизируемым IP-адресом, например 192.168.1.1 ( "серый IP" ). При создании соединений  от сетевых устройств локальной сети к внешним сетевым узлам, IP-пакеты направляются на маршрутизатор, который выполняет трансляцию адресов и портов  таким образом, чтобы, адресом отправителя стал его <B>белый IP-адрес</B>. Результаты трансляции сохраняются и при получении ответного пакета, выполняется обратное преобразование адреса. Таким образом, 
маршрутизатор обеспечивает пересылку TCP/IP - пакетов от любых устройств локальной сети во внешние сети и обратную пересылку полученных ответных пакетов. Но в тех случаях,  
когда на вход  сетевого интерфейса, подключенного к сети провайдера,  принимается пакет, который не имеет отношения к ответным TCP-пакетам, возможны следующие варианты 
реакции программного обеспечения маршрутизатора:<BR><BR>
- пакет игнорируется, так как нет сетевой службы, которая могла бы его обработать.<BR><BR>
- пакет принимается и обрабатывается сетевой службой самого маршрутизатора, если такая служба существует и ожидает ходящее соединение ("слушает") порт, номер которого указан в принятом пакете.<BR><BR>
- пакет пересылается серверу в локальной сети, ожидающему данный вид входящих соединений  в соответствии с правилами перенаправления портов ( port mapping ) заданными настройками маршрутизатора.<BR><BR>

Поэтому, в настоящее время, основным  режимом работы по протоколу FTP стал так называемый "пассивный режим", при котором TCP - соединения выполняются только от клиента на TCP-порт сервера. 
Активный же режим, используется  в тех случаях, когда существует возможность TCP - подключения от сервера на порты клиентов, например, когда они находятся в одной локальной сети. 
Выбор режима FTP-соединения производится специальными командами:<BR><BR>
<B>PASV</B> - клиент передает команду, чтобы выполнить обмен данными  в пассивном  режиме. Сервер вернет адрес и порт к которому нужно подключиться чтобы принимать или передавать данные. 
Пример фрагмента FTP- сессии с установкой пассивного режима:<BR><BR>
<B>PASSV</B> - команда на переключение в пассивный режим, передаваемая FTP - клиентом FTP-серверу<BR><BR>
<B>227 Entering Passive Mode (212,248,22,144,195,89)</B> - ответ FTP-сервера, где 227 - код ответа, текстовое сообщение о переходе в пассивный режим и в скобках IP-адрес и номер порта, 
которые будут использованы для создания канала передачи данных. Адрес и номер порта отображаются в виде десятичных чисел, разделяемых запятой. Первые 4 числа - это IP-адрес ( 212.248.22.144), 
оставшиеся 2 числа задают номер порта, который вычисляется по формуле - первое число умножается на 256 и к результату прибавляется второе число, в данном примере  номер порта 195*256 +89 = 50017
<BR><BR>

<B>PORT IP адрес клиента номер порта</B> - клиент передает команду, чтобы организовать сеанс   в активном режиме.  IP-адрес и номер порта задаются в том же формате, как и в предыдущем примере, 
например PORT 212.248.22.144,195,89 Для  организации передачи данных сервер сам подключается к клиенту на указанный порт. <BR><BR>

<!-- Яндекс.Директ -->
<div id="yandex_ad2"></div>
<script type="text/javascript">
(function(w, d, n, s, t) {
w[n] = w[n] || [];
w[n].push(function() {
Ya.Direct.insertInto(77159, "yandex_ad2", {
stat_id: 134,
ad_format: "direct",
type: "adaptive",
border_type: "block",
limit: 3,
border_radius: true,
links_underline: true,
site_bg_color: "FFFFFF",
border_color: "FBE5C0",
title_color: "0000CC",
url_color: "006600",
text_color: "000000",
hover_color: "0066FF",
sitelinks_color: "0000CC",
favicon: true,
no_sitelinks: false,
height: 200,
width: 320
});
});
t = d.getElementsByTagName("script")[0];
s = d.createElement("script");
s.src = "//an.yandex.ru/system/context.js";
s.type = "text/javascript";
s.async = true;
t.parentNode.insertBefore(s, t);
})(window, document, "yandex_context_callbacks");
</script>


<center>
<B><h2>
Установка и настройка FileZilla FTP Server.
</h2>
</b></center>

Скачать инсталляционный пакет FileZilla Server для вашей версии операционной системы можно на 
<a target="_blank" href=https://filezilla-project.org/ rel="nofollow">странице проекта SourceForge</a><BR><BR>
Установка сервера выполняется стандартным образом, за исключением пункта с выбором настроек панели управления сервером <B>FileZilla Server Interface</B>:
<BR><BR>
<center>
<img src="http://ab57.ru/images/filezilla2.png" alt="FileZilla Server Interface" WIDTH=513 height=400>
<BR><BR></center>

<B>FileZilla Server Interface</B> - это основное средство управления сервером, через которое выполняются все необходимые настройки. По умолчанию, панель управления работает 
на петлевом интерфейсе без доступа по паролю. При необходимости, например, если потребуется удаленное управление FTP-сервером, эти настройки можно будет изменить.
<BR><BR>
После завершения установки откроется окно приглашения для подключения к серверу:<BR><BR>

<center>
<img src="http://ab57.ru/images/filezilla3.png" alt="Подключение к FileZilla Server Interface" WIDTH=264 height=211>
<BR><BR></center>

После ввода IP-адреса, номера порта и пароля ( если вы задавали их в процессе установки ) открывается панель управления FileZilla Server:<BR><BR>
<center>
<img src="http://ab57.ru/images/filezilla4.png" alt="Панель управления   FileZilla Server" WIDTH=768 height=525>
<BR><BR></center>
В верхней части окна находится основное меню и кнопки панели управления. Ниже располагаются две области - информационных сообщений сервера и статистической информации. 
В целом, панель управления FTP FileZilla Servver довольно простая и удобная в использовании. Пункты основного меню:<BR><BR>
<B>File</B> - режимы работы панели управления FTP-сервером. Содержит подпункты<BR><BR>
<B>- Connect to Server</B> - подключиться к серверу<BR>
<B>- Disconnect</B> - отключиться от сервера<BR>
<B>- Quit</B> - завершение работы панели управления.<BR><BR>

<B>Server</B> - управление FTP-сервером. Содержит подпункты:<BR><BR>
- <B>Active</B> - запустить/остановить FTP-сервер. При установленной галочке  FTP-сервер запущен, при снятой - остановлен.<BR>
- <B>Lock</B> - запретить/разрешить подключения к серверу. При установленной галочке новые подключения к серверу запрещены.<BR><BR>

<B>Edit</B> - редактирование настроек. Подпункты:<BR><BR>
- <B>Settings</B> - основные настройки сервера.<BR>
- <B>Users</B> - настройки пользователей FTP-сервера<BR>
- <B>Groups</B> - настройки групп пользователей.<BR><BR>
В качестве примера, выполним настройки сервера для следующих условий:<BR><BR>
<LI> сервер находится за NAT, имеет приватный IP-адрес, но должен быть доступен из Интернет, поддерживает  пассивный режим и использует нестандартные TCP порты. Использование 
нестандартных портов позволяет уменьшить вероятность хакерских атак, и кроме того, некоторые провайдеры 
используют фильтрацию трафика и блокируют стандартные 20 и 21 порты.<BR><BR></li>
<LI>пользователи имеют возможность скачивать с сервера , закачивать на сервер, удалять и переименовывать файлы и папки.<BR><BR></LI>
<LI>в случае использования динамического IP-адреса, требуется обеспечить доступность сервера по DNS-имени. <BR><BR></LI>
<LI>сервер будет функционировать на рабочей станции в среде ОС Windows 7 / Windows 8. 
<BR><BR></LI>
Другими словами, нужно создать доступный из Интернет FTP-сервер для обмена файлами между пользователями, разумеется бесплатно. Вполне понятно, что кроме создания 
необходимой  конфигурации самого FTP - сервера, потребуется изменение некоторых настроек маршрутизатора, параметров брандмауэра Windows, решение проблемы динамического IP-адреса, 
чтобы сервер был доступен по имени, независимо от смены IP-адреса.  
<BR><BR>



<center><B><H2 id="id1">Решение проблемы динамического IP-адреса.</H2></B></center>
<br><br>
&nbsp &nbsp
Данная проблема не требует решения в тех случаях, когда при подключении к интернет используется статический IP - адрес, или же динамический, но в соответствии с настройками провайдера, практически 
всегда один и тот же.  В противном случае, можно воспользоваться технологией,  получившей название <B>Динамический DNS </B> ( <B> DDNS </B>) . Данная технология, позволяет   почти в 
реальном масштабе времени обновлять информацию об IP-адресе на DNS-сервере,  и получать доступ к маршрутизатору ( и службам за ним) по зарегистрированному имени, не обращая внимание на 
изменение динамического IP. <BR><BR> 
Для бесплатной реализации данной технологии  потребуется регистрация на каком-нибудь сервисе динамического DNS и установка клиентского программного обеспечения для обновления  
записи DNS в случае изменения соответствующего IP-адреса.  Поддержку динамического DNS, как правило, осуществляют производители сетевого оборудования (D-Link, Zyxel и др.), некоторые 
хостинговые  и специализированные компании, как например, широко известная  DynDNS  . Однако, после того, как во второй половине 2014 года, все услуги, которые предоставлялись 
зарегистрированным пользователям бесплатно для некоммерческого использования, стали платными, наиболее популярным решением, пожалуй, стало использование динамического DNS на 
базе сервиса <B>No-IP.org</B>, который в бесплатном режиме предоставляет услуги по поддержке 2-х  узлов с динамическим IP. Для бесплатного использования сервиса потребуется регистрация, и периодическое 
(приблизительно 1 раз в месяц) посещение сайта для обновления информации об используемых узлах с динамическим IP. Эсли пропустить обновление данных об узле, то услуга приостанавливается, и соответственно, 
подключиться к узлу по имени станет невозможно. При платном использовании сервиса обновление не требуется.<BR><BR>
&nbsp &nbsp 
Практически все современные маршрутизаторы ( модемы )  имеют встроенную поддержку динамического DNS-клиента. Его настройка обычно очень простая, - заполняются поля с именем  
пользователя и паролем, а также с именем узла,  полученные при регистрации на сервисе DDNS . Пример для Zyxel P660RU2 
<BR><BR>
<center>
<img src="http://ab57.ru/images/dyndns4.jpg" alt="Настройка DynDNS-клиента ADSL-модема" WIDTH=889 height=540>
</center>
<BR><BR>
&nbsp &nbsp 
Использование клиента DDNS, встроенного в маршрутизатор/модем предпочтительнее по сравнению с утилитой обновления данных  DNS, работающей в среде ОС, поскольку позволяет реализовать 
дополнительные возможности, как например, управление маршрутизатором через Интернет при выключенном компьютере и удаленное включение электропитания компьютеров за NAT по технологии 
<B>Wake On Lan</B>. 
<BR><BR>
В тех же случаях, когда нет возможности использования встроенного клиента DDNS, придется обходиться прикладным программным обеспечением - программой-клиентом поддержки динамического DNS. Такая программа 
периодически подключается к серверу, поддерживающему зарегистрированное доменное имя, связанное с маршрутизатором, через который выполняется подключение к Интернет, и вызывает процедуру обновления IP, при его изменении. Настройки сервера выполнены таким образом, что сопоставление DNS-имени и IP-адреса интернет-подключения выполняется за очень короткое время, и динамический характер адреса практически никак не сказывается на работоспособности сервисов, связанных с DNS-именем.<BR><BR>
Порядок действий следующий:<BR><BR>

<B><LI></B> Идем на <a target="_blank" href="http://no-ip.org" rel="nofollow"> сайт No-IP.org</a>. 
Для работы с уже имеющейся или новой учетной записью используется кнопка 
<B><font color="blue">
"Sign In"</font></B> (в верхней правой части страницы). <BR><BR>

<B><LI></B> Создаем, если она еще не создана, свою учетную запись - жмем <B><font color="blue">
"Create Account"</font></B>. 

Форма регистрации периодически меняется, но обязательными являются ввод 
желаемого имени пользователя, пароля и вашего  E-mail.  
 На указанный при регистрации e-mail 
приходит письмо с ссылкой для подтверждения регистрации.  При регистрации выбираем бесплатный доступ - жмем кнопку <B>Free Sign Up</B> после заполнения всех требуемых полей формы. 

<B><LI></B> После успешной регистрации входим на сайт и добавляем запись 
для своего узла - жмем кнопку <B><font color="blue">"Add Hosts"</font></B> <BR><BR>
<center>
<img src="http://ab57.ru/images/noip.png" alt="Регистрация нового узла с  FileZilla Server в No-IP.org." WIDTH=813 height=544>
<BR><BR></center>
Фактически, необходимо ввести только выбранное имя узла, в данном случае - <B>myhost8.ddns.net</B>. Остальные параметры менять не нужно. 
Затем необходимо скачать и установить специальное программное обеспечение - <B> Dynamic Update Client </B> ( DUC), ссылка на который размещена на главной странице сайта. 
После завершения установки DUC  выполнится его запуск и откроется  окно авторизации, где нужно ввести  имя пользователя или E-mail и пароль, полученные при регистрации на сайте no-ip.org. 
Затем нажать кнопку <B>Edit Hosta</B> и поставить галочку напротив созданного ранее имени узла ( myhost8.ddns.net ) . Теперь, выбранному имени узла будет постоянно 
соответствовать "белый IP-адрес" вашего подключения к Интернет. При возникновении проблем с обновлением IP-адреса, проверьте, не блокируется ли сетевая активность клиента DUC брандмауэром.<BR><BR>


<center><B><H2 id="id1">Настройка FTP-сервера</H2></B></font></center>
<br><br>
&nbsp &nbsp
Использование нестандартных номеров портов для FTP-сервера совсем не обязательно, если провайдер не использует фильтрацию трафика, или вам безразлично сканирование портов на уязвимости и попытки 
подбора паролей. В данной статье, использование FTP-сервера с нестандартными TCP-портами, представлено  в качестве одного из возможных вариантов. <BR><BR>
Настройки FileZilla Server выполняются через меню "Edit" -"Settings"<BR><BR>

<center>
<img src="http://ab57.ru/images/filezilla5.png" alt="Панель управления  - общие настройки  FileZilla Server" WIDTH=607 height=419>
<BR><BR></center>
Окно <B>General Settings</B> предназначено для общих настроек FTP-сервера. <BR><BR>
В поле "Listen on this port" можно указать номер порта для входящих TCP-соединений. По умолчанию в данном поле установлено значение <B>21</B>, и для использования 
нестандартного номера нужно указать выбранное значение, например - <B>12321</B>. Использование нестандартного TCP-порта имеет некоторое неудобство, поскольку требует обязательное указание его значения при создании сеанса:<BR><BR>
<B>ftp://myhost8.ddns.net</B> - вид ссылки для случая с использованием стандартных номеров портов.<BR>
<B>ftp://myhost8.ddns.net:12321</B> - вид ссылки для случая с использованием номера порта 12321.<BR><BR>
Если сервер планируется использовать как с доступом из Интернет, так и в локальной сети, есть смысл оставить стандартное значение 21, а нестандартный номер порта использовать 
для подключений из Интернет, настроив перенаправление пакетов, пришедших на порт 12321  маршрутизатора, на порт 21 FTP-сервера в локальной сети. При такой настройке, для FTP-сессий внутри локальной сети указывать номер порта не нужно.<BR><BR>
Прочие параметры предназначены для настройки производительности и таймаутов сессий. Их можно оставить без изменений. Остальные разделы общих настроек можно также оставить по умолчанию:<BR><BR>
<B>Welcome Message</B> - текст, который передается клиенту при подключении.<BR><BR>
<B>IP Binding</B> -  на каком сетевом интерфейсе будут ожидаться клиентские подключения. По умолчанию - на любом, но можно указать конкретный, например - 192.168.1.3.<BR><BR>
<B>IP Filter</B> - настройка правил фильтрации IP-адресов клиентов. По умолчанию - разрешены подключения для любых IP.<BR><BR>

Раздел <B>Passive mode settings</B> служит для настроек пассивного режима FTP и потребует изменения практически всех параметров, принятых по умолчанию.<BR><BR>

<center>
<img src="http://ab57.ru/images/filezilla51.png" alt="Настройка пассивного режима   FileZilla Server" WIDTH=597 height=405>
<BR><BR></center>

Номера портов, которые будут использоваться для передачи данных в пассивном 
режиме, нужно задавать вручную, поскольку потребуется настройка маршрутизатора 
для перенаправления их на слушаемый сервером сетевой интерфейс. Поэтому нужно 
установить галочку на разрешение режима  "Use custom port range" и задать диапазон - например от <B>50000</B> до <B>50020</B>.  Количество портов, слушаемых сервером, определяет предельное число одновременных сеансов передачи данных.<BR><BR>
Подраздел <B>IPv4 specific</B> определяет IP - адрес, который будет 
отправляться сервером в ответ на команду PASV. В данном случае, это должен быть не собственный IP сервера 192.168.1.3,  а "белый IP" нашего подключения к Интернет. Поэтому нужно установить режим "Use the following IP" и вместо IP-адреса ввести имя, полученное при регистрации на  сервисе динамического DNS - <B>myhost8.ddns.net</B>. В качестве альтернативы, можно использовать режим определения внешнего IP-адреса  средствами проекта FileZilla, включив.  "Retrieve external IP Address from:". Данный вариант можно выбрать в тех случаях,  когда  нет возможности использовать средство динамического DNS. Если предполагается использование FTP - сервера  в своей локальной сети, нужно установить режим "Don't use external IP for local connections" (не использовать внешний IP-адрес для соединений внутри локальной сети)<BR><BR> 
Остальные настройки сервера можно оставить без изменений или, при необходимости, выполнить позже:
<B> Security settings</B> - настройки безопасности. По умолчанию - запрещены соединения, которые могут быть использованы для реализации DDoS-атак<BR><BR>
<B>Miscellaneous</B> - настройки размеров буферов и прочих параметров журналов и некоторых команд FTP.<BR><BR>
<B>Admin Interface settings</B> - настройки панели управления сервером. Можно указать 
сетевой интерфейс,  номер слушаемого порта, IP-адреса, с которых разрешено подключение 
к панели управления и пароль.  <BR><BR>
<B>Logging</B> - настройки журнала событий сервера. По умолчанию, запись в файл не выполняется.<BR><BR>
<B>Speed Limit</B> - настройки ограничения скорости передачи данных. По умолчанию - без ограничений.<BR><BR>
<B>Filetransfer compression</B> - настройки сжатия файлов при передаче. По умолчанию - без сжатия.<BR><BR>
<B>SSL/TLS settings</B> включение режима шифрования передаваемых данных. По умолчанию - без шифрования.<BR><BR>
<B>Autoban</B> - включение автоматической блокировки пользователей, подбирающих пароль для подключения. По умолчанию, автоматическая блокировка выключена.<BR><BR>

<center><B><H2 id="id1"><font color=blue>Настройка перенаправления портов и брандмауэра</H2></B></font></center>
<br><br>
Для того, чтобы FTP-сервер был доступен из Интернет, необходимо выполнить настройки маршрутизатора таким образом, чтобы входящие соединения, пришедшие на определенные TCP-порты внешнего интерфейса, 
перенаправлялись на TCP - порты, слушаемые FTP-сервером внутренней сети. Для различных моделей маршрутизаторов настройки могут отличаться терминологией, но смысл их один и то же - 
принятый на внешнем (WAN) интерфейсе TCP-пакет с определенным номером порта переслать в локальную сеть на нужный IP-адрес и порт. Пример настроек маршрутизатора D-Link 
DIR-320NRU для перенаправления портов,   используемых для пассивного режима FTP :<BR><BR>


<center>
<img src="http://ab57.ru/images/portmap.png" alt="Перенаправление портов для пассивного режима FileZilla Server" WIDTH=813 height=544>
<BR><BR></center>
Пакеты, принятые на интерфейсе с "белым IP" и имеющие номера портов в диапазоне 50000-50020 будут перенаправляться на IP-адрес, задаваемый полем "Внутренний IP" ( в нашем случае - 192.168.1.3 ). 
Аналогичным образом создается перенаправление для порта 50021, если вы изменили номер стандартного порта, или на порт 21 FTP-сервера, если вы оставили его без измененния. <BR><BR>
После применения данных настроек, FTP-сервер будет доступен по URL <B>ftp://myhost8.ddns.net:50021</B>  или, для соединения внутри локальной сети:<BR><BR>
<B>ftp://192.168.1.3</B> - если вы не изменяли стантартный номер порта ( 21 ) в настройках FTP-сервера.<BR><BR>
<B>ftp://192.168.1.3:50021</B> - если используется нестандартный номер порта. <BR><BR>
Вместо IP-адреса можно использовать имя компьютера, если оно может быть разрешено в IP-адрес<BR><BR>
<B>ftp://comp1</B><BR><BR>
<B>ftp://comp1.mydomain.ru</B><BR><BR>
<B><center>Диагностика проблем</B></center><BR><BR>
Если подключение к FTP - серверу не происходит, то возможно,  возникли  проблемы с блокировкой брандмауэром соединений, необходимых для работы созданного FTP-сервера. Если используется встроенный брандмауэр Windows, то необходимо добавить правило, разрешающее сетевую активность для службы "FileZilla FTP server". Если используется сторонний брандмауэр или антивирус с фильтрацией трафика, то необходимо создать соответствующее правило имеющимися средствами настроек для разрешения сетевых соединений. Возможны варианты, когда настройки делаются для разрешения любой сетевой активности конкретной программы, или для разрешения выбранных адресов и портов, применяемых ко всем программам.<BR><BR>
Начать диагностику лучше всего на самом FTP-сервере. В качестве средства диагностики, можно использовать стандартный <B>telnet - клиент</B> (утилита  <B>telnet.exe</B> ) . Все брандмауэры не блокируют соединения на петлевом интерфейсе и для проверки правильности настроек сервера можно подключиться к нему введя команду:<BR><BR>
<B>telnet localhost 21</B> - если используется стандартный номер порта.<BR><BR>
<B>telnet localhost 50021</B>  - если был изменен стандартный номер порта.<BR><BR>
При выполнении данной команды происходит подключение к FTP-серверу по петлевому интерфейсу и в окне telnet должно отобразиться приглашение сервера ( Welcome Message ). Если этого не происходит, возможно, сервер остановлен, имеет место конфликт портов, или  слушается не порт 21 (50021) .  Для диагностики можно использовать команду <B>netstat</B>:<BR><BR>
<B>netstat –nab</B><BR><BR>
Параметры командной строки означают:<BR><BR>
<B>n</B> - использовать числовые номера портов и адреса IP<BR><BR>
<B>a</B> - отображать все соединения и слушаемые порты<BR><BR>
<B>b</B> - отображать имена программ, участвующих в создании соединений.<BR><BR>
Пример отображаемых результатов выполнения команды:<BR><BR>
<B><font color=#006600>
Активные подключения<BR><BR>
Имя &nbsp &nbsp Локальный адрес &nbsp &nbsp  Внешний адрес &nbsp &nbsp Состояние<BR>
TCP &nbsp &nbsp  &nbsp &nbsp 0.0.0.0:21 &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp  &nbsp &nbsp 0.0.0.0:0 &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp  &nbsp &nbsp LISTENING<BR>
[FileZilla Server.exe]<BR>
TCP &nbsp &nbsp &nbsp &nbsp 0.0.0.0:135 &nbsp &nbsp &nbsp &nbsp &nbsp  &nbsp &nbsp 0.0.0.0:0 &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp  &nbsp &nbsp LISTENING<BR>
RpcSs<BR><BR>
</font></b>

В колонке <B> Локальный адрес</B> имеется значение <B>0.0.0.0:21</B>, которое говорит о том, что программа с именем <B>FileZilla Server.exe</B> слушает ( состояние <B>LISTENING</B>) TCP порт с номером 21 на всех сетевых интерфейсах. Если в настройках FTP-сервера был указан конкретный интерфейс и другой номер порта, то это значение будет содержать <B>IP:порт</B>, например – <B>192.168.1.3:50021</B><BR><BR>
Для вывода результатов в постраничном режиме, можно воспользоваться командой:<BR><BR>
<B>netstat -nab | more</B> <BR><BR>
Или использовать поиск результатов по номеру порта: <B>netstat -nab | find ":21"</B><BR><BR>
Если сервер недоступен на непетлевом интерфейсе , и доступен на петлевом - нужно разбираться с настройками брандмауэра. <BR><BR>

<center><B><H2 id="id1"><font color=blue>Настройка пользователей и групп.</H2></B></font></center>
<br><br>
Настройка пользователей и групп выполняется через меню "Edit" - "Users" ( "Groups" ). Группы создавать необязательно, но иногда удобно, для тех случаев, когда имеется большое количество пользователей, и их права по отношению к FTP-серверу различаются. Настройки и групп и пользователей практически идентичны:<BR><BR>
<center>
<img src="http://ab57.ru/images/filezilla6.png" alt="Настройка пользователей  FileZilla Server" WIDTH=661 height=445>
<BR><BR></center>
В данном  примере отображен результат добавления  пользователя FTP-сервера с именем <B>user1</B> имеющего полные права на запись, чтение, удаление и слияние файлов, а также на просмотр содержимого, удаление и создание подкаталогов в каталоге <B>C:\ftp\public</B><BR><BR>

На странице <B>General</B> выполняется добавление, удаление и изменение свойств пользователей. <BR>

На странице <B>Shared Folders</B> выполняются настройки, определяющие перечень каталогов файловой системы, которые будут использоваться FTP-сервером для предоставления доступа к ним по протоколу FTP. Каждому пользователю или группе пользователей может предоставлен свой каталог с определенными правами по отношению к его содержимому.<BR>
На странице <B>Speed limits</B> можно задавать ограничения по скорости обмена данными.<BR>
На странице <B>IP Filter</B> можно задать правила фильтрации для IP - адреса пользователя, указав адреса с которых запрещено или разрешено подключение к серверу .<BR>

<BR>
<BR><BR>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- links_adapt -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2015323949432193"
     data-ad-slot="8529241667"
     data-ad-format="link"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

<BR><BR>

<BR>
<B> <font size=+1>
<center>Список основных команд FTP</B></center><BR><BR></font></B>

ABOR - Прервать передачу файла <BR>
CDUP - Сменить директорию на вышестоящую. <BR>
CWD - Сменить текущую директорию. <BR>
DELE - Удалить файл (DELE filename). <BR>
HELP - Выводит список команд принимаемых сервером. <BR>
LIST - Возвращает список файлов директории. Список передается через соединение данных (20 порт). <BR>
MDTM - Возвращает время модификации файла. <BR>
MKD - Создать директорию. <BR>
NLST - Возвращает список файлов директории в более кратком формате чем LIST. Список передается через соединение данных (20 порт). <BR>
NOOP - Пустая операция <BR>
PASV - Войти в пассивный режим. Сервер вернет адрес и порт к которому нужно подключиться чтобы забрать данные. Передача начнется при введении команд RETR, LIST и т.п. <BR>
PORT - Войти в активный режим. Например PORT 12,34,45,56,78,89. В отличие от пассивного режима для передачи данных сервер сам подключается к клиенту. <BR>
PWD - Возвращает текущую директорию сервера. <BR>
QUIT - Отключиться <BR>
REIN - Реинициализировать подключение <BR>
RETR - Скачать файл. Перед RETR должна быть команда PASV или PORT. <BR>
RMD - Удалить директорию <BR>
RNFR и RNTO - Переименовать файл. RNFR - что переименовывать, RNTO - во что. <BR>
SIZE - Возвращает размер файла <BR>
STOR - Закачать файл на сервер. Перед STOR должна быть команда PASV или PORT. <BR>
SYST - Возвращает тип системы(UNIX, WIN,) <BR>
TYPE - Установить тип передачи файла(A- текстовый ASCII, I - двоичный) <BR>
USER - Имя пользователя для входа на сервер <BR>
<BR><BR>

<B> <font size=+1>
<center>Пример FTP-сессии</B></center><BR><BR></font></B>
<BR><BR>
FTP-клиент подключается к серверу с именем пользователя <B>user1</B>,  пустым паролем и скачивает файл с именем <B>cpu-v</B>.
Красным цветом выделены сообщения FTP-сервера, синим - FTP-клиента. Обмен директивами и параметрами может незначительно отличаться для разных версий программного обеспечения FTP-клиента и FTP-сервера.<BR><BR>
После подключения, сервер передает клиенту сведения о себе:<BR>
<font color=red>
220-FileZilla Server version 0.9.45 beta<BR>

220-written by Tim Kosse (tim.kosse@filezilla-project.org) <BR>

220 Please visit http://sourceforge.net/projects/filezilla/<BR>

</font>
Клиент передает имя пользователя:<BR>
<font color=blue>
USER user1<BR>
</font>
Сервер запрашивает ввод пароля:<BR>
<font color=red>
331 Password required for user1<BR>
</font>
Клиент передает пустой пароль:<BR>
<font color=blue>
PASS </font><BR>
Сервер проверяет учетную запись пользователя и сообщает о начале сеанса:<BR>
<font color=red>
230 Logged on</font><BR>
Клиент запрашивает тип операционной системы на сервере:<BR>
<font color=blue>
SYST</font><BR>
Сервер сообщает, что тип <B>Unix</B>, эмулируемый Filezilla-сервером:<BR>
<font color=red>
215 UNIX emulated by FileZilla</font><BR>
Клиент запрашивает перечень параметров, поддерживаемых сервером:<BR>
<font color=blue>
FEAT</font><BR>
Сервер отвечает перечнем поддерживаемых параметров:<BR>
<font color=red>
211-Features: <BR>

 MDTM<BR>

 REST STREAM<BR>

 SIZE<BR>

 MLST type*;size*;modify*;<BR>

 MLSD<BR>

 UTF8<BR>

 CLNT<BR>

 MFMT<BR>

211 End</font><BR>
Клиент запрашивает текущий каталог сервера:<BR>
<font color=blue>

PWD</font><BR>
Сервер сообщает, что текущий каталог – корневой ("/"):<BR>
<font color=red>

257 "/" is current directory.</font><BR>
<font color=blue>
Клиент сообщает, что будет передавать двоичные данные:<BR>
TYPE I</font><BR>
Сервер подтверждает тип передаваемых данных:<BR>
<font color=red>

200 Type set to I</font><BR>
Клиент сообщает, что будет использовать пассивный FTP-режим:<BR>
<font color=blue>
PASV</font><BR>
Сервер сообщает о переходе в пассивный режим и передает IP и порт для пассивного FTP-режима.<BR>
<font color=red>

227 Entering Passive Mode (212,248,22,114,195,97)</font><BR>
Клиент запрашивает прием файла с именем <B>cpu-v</B> из текущего каталога сервера<BR>
<font color=blue>

RETR cpu-v</font><BR>
<font color=red>
Сервер сообщает о начале передачи данных:<BR>
150 Opening data channel for file download from server of "/cpu-v"<BR>
</font>
По завершении, сервер сообщает об успешной передаче:<BR>
<font color=red>
226 Successfully transferred "/cpu-v"<BR>

</font>
<BR><BR>
В заключение добавлю, что проект Filezilla включает в себя не только разработку и поддержку 
качественного бесплатного FTP-сервера, но и популярного бесплатного FTP-клиента<BR><BR>
<a target=_blank href=http://ab57.ru/filezillac.html>Установка и настройка Filezilla FTP Client</a> статья с кратким описанием бесплатного FTP клиента для Linux, Mac OS и Windows.
Данный FTP клиент поддерживает множество прикладных протоколов передачи данных - FTP, FTP поверх SSL/TLS (FTPS), 
SSH File Transfer Protocol (SFTP), HTTP, SOCKS и FTP-Proxy. Другими словами, Filezilla FTP Client - это универсальное программное обеспечение для приема и передачи файлов 
по всем современным прикладным протоколам между узлами на различных платформах.
<BR><BR><BR>
<noindex>
Если вы желаете поделиться ссылкой на эту страницу в своей социальной сети, пользуйтесь кнопкой "Поделиться"<BR><BR>
<script src="https://yastatic.net/share2/share.js" async="async"></script>
<div class="ya-share2" data-services="vkontakte,twitter,facebook,odnoklassniki,gplus" data-counter=""></div>
<BR><BR><BR>

<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- links_adapt -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2015323949432193"
     data-ad-slot="8529241667"
     data-ad-format="link"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<BR><BR>

<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- Adapt-a -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2015323949432193"
     data-ad-slot="2828909264"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<BR><BR>
<!-- Яндекс.Директ -->
<div id="yandex_ad9"></div>
<script type="text/javascript">
(function(w, d, n, s, t) {
w[n] = w[n] || [];
w[n].push(function() {
Ya.Direct.insertInto(77159, "yandex_ad9", {
stat_id: 1,
ad_format: "direct",
type: "adaptive",
border_type: "block",
limit: 4,
border_radius: true,
links_underline: true,
site_bg_color: "FFFFFF",
border_color: "FBE5C0",
title_color: "0000CC",
url_color: "006600",
text_color: "000000",
hover_color: "0066FF",
sitelinks_color: "0000CC",
favicon: true,
no_sitelinks: false,
height: 200,
width: 300
});
});
t = d.getElementsByTagName("script")[0];
s = d.createElement("script");
s.src = "//an.yandex.ru/system/context.js";
s.type = "text/javascript";
s.async = true;
t.parentNode.insertBefore(s, t);
})(window, document, "yandex_context_callbacks");
</script>


<BR><BR><BR>

<font size=+2>
<center> <a href="http://ab57.ru/filezilla.html">В начало страницы</a>  &nbsp &nbsp | &nbsp &nbsp 
<a href="http://ab57.ru/index.html">
<font color=RED>
На главную страницу сайта </font>
</a> </center>

<BR><BR>
</td>
<td width="20%"></td>
</tr></table>

<table width=100%>
<tr>


<BR><BR>
</tr></table>




<Table Width="100%" Border="0" CellSpacing="0" CellPadding="2">
<tr align="center">
<td width=15%></td>
  <Td>
<div id='Rambler-counter'>
<!-- Внимание! В этом div'е не нельзя размещать пользовательский контент: он будет затерт! -->
<noscript>
<a href="http://top100.rambler.ru/navi/2296744/">
  <img src="http://counter.rambler.ru/top100.cnt?2296744" alt="Rambler's Top100" border="0" />
</a>
</noscript>
</div>

<!-- Код скрипта должен быть размещен строго ниже контейнера для логотипа (div c id='Rambler-counter') -->
<script type="text/javascript">
var _top100q = _top100q || [];
_top100q.push(['setAccount', '2296744']);
_top100q.push(['trackPageviewByLogo', document.getElementById('Rambler-counter')]);

(function(){
  var pa = document.createElement("script"); 
  pa.type = "text/javascript"; 
  pa.async = true;
  pa.src = ("https:" == document.location.protocol ? "https:" : "http:") + "//st.top100.ru/top100/top100.js";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(pa, s);
})();
</script>

</td>

<td>
<!--Rating@Mail.ru counter-->
<script language="javascript"><!--
d=document;var a='';a+=';r='+escape(d.referrer);js=10;//--></script>
<script language="javascript1.1"><!--
a+=';j='+navigator.javaEnabled();js=11;//--></script>
<script language="javascript1.2"><!--
s=screen;a+=';s='+s.width+'*'+s.height;
a+=';d='+(s.colorDepth?s.colorDepth:s.pixelDepth);js=12;//--></script>
<script language="javascript1.3"><!--
js=13;//--></script><script language="javascript" type="text/javascript"><!--
d.write('<a href="http://top.mail.ru/jump?from=1916916" target="_top">'+
'<img src="http://df.c3.bd.a1.top.mail.ru/counter?id=1916916;t=130;js='+js+
a+';rand='+Math.random()+'" alt="Рейтинг@Mail.ru" border="0" '+
'height="40" width="88"><\/a>');if(11<js)d.write('<'+'!-- ');//--></script>
<noscript><a target="_top" href="http://top.mail.ru/jump?from=1916916">
<img src="http://df.c3.bd.a1.top.mail.ru/counter?js=na;id=1916916;t=130" 
height="40" width="88" border="0" alt="Рейтинг@Mail.ru"></a></noscript>
<script language="javascript" type="text/javascript"><!--
if(11<js)d.write('--'+'>');//--></script>
<!--// Rating@Mail.ru counter-->

</td>

<td>
<!--LiveInternet counter--><script type="text/javascript"><!--
document.write("<a href='http://www.liveinternet.ru/click' "+
"target=_blank><img src='http://counter.yadro.ru/hit?t14.11;r"+
escape(document.referrer)+((typeof(screen)=="undefined")?"":
";s"+screen.width+"*"+screen.height+"*"+(screen.colorDepth?
screen.colorDepth:screen.pixelDepth))+";u"+escape(document.URL)+
";"+Math.random()+
"' alt='' title='LiveInternet: показано число просмотров за 24"+
" часа, посетителей за 24 часа и за сегодня' "+
"border='0' width='88' height='31'><\/a>")
//--></script><!--/LiveInternet-->



</td>


<td width=15%></td></tr></table>
<!-- Yandex.Metrika counter -->
<div style="display:none;"><script type="text/javascript">
(function(w, c) {
    (w[c] = w[c] || []).push(function() {
        try {
            w.yaCounter10501945 = new Ya.Metrika({id:10501945, enableAll: true});
        }
        catch(e) { }
    });
})(window, "yandex_metrika_callbacks");
</script></div>
<script src="//mc.yandex.ru/metrika/watch.js" type="text/javascript" defer="defer"></script>
<noscript><div><img src="//mc.yandex.ru/watch/10501945" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
<!-- /Yandex.Metrika counter -->
<!-- код отслеживания 23.09 -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-55082052-1', 'auto');
  ga('send', 'pageview');

</script>
</noindex>
</body>
</html>
